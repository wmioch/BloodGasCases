<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blood Gas Generator | Physiological ABG Simulator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <a href="index.html" style="display: flex; align-items: center; gap: 16px; color: inherit; text-decoration: none;">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2"/>
              <path d="M10 16h12M16 10v12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>Blood Gas Generator</span>
          </a>
        </div>
        <p class="tagline">Physiologically accurate ABG simulation for medical education</p>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Left Panel: Controls -->
      <section class="panel controls-panel">
        <div class="panel-header">
          <h2>Scenario Configuration</h2>
        </div>
        
        <div class="panel-content">
          <!-- Condition Selection -->
          <div class="control-group">
            <label class="control-label">
              <span>Clinical Conditions</span>
              <span class="hint">Select one or more conditions</span>
            </label>
            <div class="condition-selector" id="conditionSelector">
              <!-- Categories will be populated by JS -->
            </div>
            <div class="selected-conditions" id="selectedConditions">
              <!-- Selected conditions with severity sliders -->
            </div>
          </div>

          <!-- Patient Factors -->
          <div class="control-group">
            <label class="control-label">Patient Factors</label>
            <div class="patient-factors">
              <div class="factor">
                <label for="patientAge">Age</label>
                <input type="number" id="patientAge" value="40" min="1" max="120">
                <span class="unit">years</span>
              </div>
              <div class="factor">
                <label for="fio2">FiO₂</label>
                <input type="range" id="fio2" min="21" max="100" value="21">
                <span class="value" id="fio2Value">21%</span>
              </div>
            </div>
          </div>

          <!-- Chronic Conditions -->
          <div class="control-group">
            <label class="control-label">Chronic Conditions</label>
            <div class="checkbox-group" id="chronicConditions">
              <label class="checkbox-label">
                <input type="checkbox" value="COPD"> COPD
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="TYPE1_DIABETES"> Type 1 Diabetes
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="TYPE2_DIABETES"> Type 2 Diabetes
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="CHRONIC_KIDNEY_DISEASE"> CKD
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="HEART_FAILURE"> Heart Failure
              </label>
            </div>
          </div>

          <!-- Generate Button -->
          <button class="generate-btn" id="generateBtn">
            <span>Generate Blood Gas</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
        </div>
      </section>

      <!-- Right Panel: Results -->
      <section class="panel results-panel" id="resultsPanel">
        <div class="panel-header">
          <h2>Blood Gas Results</h2>
          <div class="result-actions">
            <button class="action-btn" id="copyBtn" title="Copy to Clipboard">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2"/>
                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
              </svg>
            </button>
            <button class="action-btn" id="exportBtn" title="Export JSON">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
              </svg>
            </button>
          </div>
        </div>
        
        <div class="panel-content">
          <!-- Placeholder -->
          <div class="results-placeholder" id="resultsPlaceholder">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M9 17H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
              <path d="M15 3h4a2 2 0 012 2v10a2 2 0 01-2 2h-4"/>
              <path d="M12 17v4M8 21h8"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            <p>Select conditions and click "Generate" to create a blood gas</p>
          </div>

          <!-- Results Container -->
          <div class="results-container" id="resultsContainer" style="display: none;">
            <!-- Severity Badge -->
            <div class="severity-badge" id="severityBadge">
              <span class="severity-text">Normal</span>
            </div>

            <!-- MEASURED VALUES SECTION -->
            <div class="result-section">
              <h3>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                  <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                </svg>
                Measured Values
              </h3>
              
              <!-- ABG Panel -->
              <div class="measured-subsection">
                <h4>Arterial Blood Gas</h4>
                <div class="result-grid abg-grid">
                  <div class="result-item" id="result-ph">
                    <span class="result-label">pH</span>
                    <span class="result-value">-</span>
                    <span class="result-normal">(7.35-7.45)</span>
                  </div>
                  <div class="result-item" id="result-pco2">
                    <span class="result-label">pCO₂</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mmHg</span>
                    <span class="result-normal">(35-45)</span>
                  </div>
                  <div class="result-item" id="result-po2">
                    <span class="result-label">pO₂</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mmHg</span>
                    <span class="result-normal">(80-100)</span>
                  </div>
                  <div class="result-item" id="result-hco3">
                    <span class="result-label">HCO₃⁻</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mEq/L</span>
                    <span class="result-normal">(22-26)</span>
                  </div>
                  <div class="result-item" id="result-sao2">
                    <span class="result-label">SaO₂</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">%</span>
                    <span class="result-normal">(95-100)</span>
                  </div>
                  <div class="result-item" id="result-fio2">
                    <span class="result-label">FiO₂</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">%</span>
                  </div>
                </div>
              </div>

              <!-- Electrolytes Panel -->
              <div class="measured-subsection">
                <h4>Electrolytes & Metabolic</h4>
                <div class="result-grid">
                  <div class="result-item" id="result-na">
                    <span class="result-label">Na⁺</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mEq/L</span>
                    <span class="result-normal">(136-145)</span>
                  </div>
                  <div class="result-item" id="result-k">
                    <span class="result-label">K⁺</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mEq/L</span>
                    <span class="result-normal">(3.5-5.0)</span>
                  </div>
                  <div class="result-item" id="result-cl">
                    <span class="result-label">Cl⁻</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mEq/L</span>
                    <span class="result-normal">(98-106)</span>
                  </div>
                  <div class="result-item" id="result-glucose">
                    <span class="result-label">Glucose</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mg/dL</span>
                    <span class="result-normal">(70-100)</span>
                  </div>
                  <div class="result-item" id="result-lactate">
                    <span class="result-label">Lactate</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">mmol/L</span>
                    <span class="result-normal">(0.5-2.0)</span>
                  </div>
                  <div class="result-item" id="result-albumin">
                    <span class="result-label">Albumin</span>
                    <span class="result-value">-</span>
                    <span class="result-unit">g/dL</span>
                    <span class="result-normal">(3.5-5.0)</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- WORKING OUT SECTION -->
            <div class="result-section working-out-section">
              <h3>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 6v6l4 2"/>
                </svg>
                Step-by-Step Analysis
              </h3>
              <div class="working-out-content" id="workingOutContent">
                <!-- Populated by JS -->
              </div>
            </div>

            <!-- FINAL INTERPRETATION -->
            <div class="result-section interpretation-section">
              <h3>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                  <path d="M22 4L12 14.01l-3-3"/>
                </svg>
                Final Interpretation
              </h3>
              <div class="interpretation-content" id="interpretationContent">
                <!-- Populated by JS -->
              </div>
            </div>

            <!-- Teaching Points -->
            <div class="result-section teaching-section">
              <h3>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
                  <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
                </svg>
                Teaching Points
              </h3>
              <ul class="teaching-points" id="teachingPoints">
                <!-- Populated by JS -->
              </ul>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>Blood Gas Generator • For educational purposes only • Not for clinical use</p>
    </footer>
  </div>

  <script src="bloodgas.bundle.js"></script>
  <script src="app.js"></script>
</body>
</html>
